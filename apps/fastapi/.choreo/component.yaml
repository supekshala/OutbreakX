schemaVersion: 1.2

# Component metadata
name: fastapi-service
componentType: service

# Build configuration
build:
  buildCommand: pip install -r requirements.txt
  runCommand: uvicorn main:app --host=0.0.0.0 --port=8000

# Ingress configuration
endpoints:
  - name: fastapi-endpoint
    displayName: FastAPI Service
    service:
      basePath: /api/v1  # Base path for all API endpoints
      port: 8000
    type: REST
    networkVisibilities:
      - Public
    # Define the routes that should be exposed
    # These should match the routes in your FastAPI application
    routes:
      - "/ping"
      - "/point"
      - "/point/all"
      - "/polygon"
      - "/api/projects/{project_id}/features"
      - "/file_upload"
      - "/file_upload/table_list/{table_name}"
      - "/file_upload/all_tables"
